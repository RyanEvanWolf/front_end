#!/usr/bin/env python
#####ros related imports
import rospy 
import cv2
import time
import copy
from front_end.utils import *
from front_end.srv import *
from front_end.msg import frameDetection,ProcTime,kPoint
from front_end.msg import Descriptors,frameDescription
from cv_bridge import CvBridge

cvb=CvBridge()


def singleStereo_fn(req):
    ###unpack the keypoints into cv lists
    lkp=[]
    rkp=[]
    for i in req.leftFeatures:
        lkp.append(ros2cv_KP(i))
    for j in req.rightFeatures:
        rkp.append(ros2cv_KP(i))
    print(len(lkp),len(rkp))
    return singleStereoResponse()


if __name__ == '__main__':
    rospy.init_node("stereo_node")
    setServices=[]
    s=rospy.Service("stereo_node/singleStereo",singleStereo,singleStereo_fn)
  
    rospy.spin()